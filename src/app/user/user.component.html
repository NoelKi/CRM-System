<section>
  <mat-form-field>
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input />
  </mat-form-field>

  <div class="mat-elevation-z8 table-responsive">
    @if (isLoadingResults) {
      <div class="loading-shade">
        <mat-spinner></mat-spinner>
      </div>
    }

    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">
      <!-- Edit Column -->
      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef>Edit User</th>

        <td mat-cell *matCellDef="let element">
          <div>
            <a [routerLink]="'./' + element.id"
              ><button mat-icon-button>
                <mat-icon>edit</mat-icon>
              </button></a
            >
            <button mat-icon-button (click)="openDeleteDialog(element.id, element.firstName)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <!-- Delete Column -->
      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef>Delete</th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button (click)="openDeleteDialog(element.id, element.firstName)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Last name Column -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
        <td mat-cell *matCellDef="let element">{{ element.lastName }}</td>
      </ng-container>

      <!-- First name Column -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>
        <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
      </ng-container>

      <!-- First name Column -->
      <ng-container matColumnDef="adress">
        <th mat-header-cell *matHeaderCellDef>Street + No</th>
        <td mat-cell *matCellDef="let element">{{ element.street }} {{ element.houseNumber }}</td>
      </ng-container>

      <!-- email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
        <td mat-cell *matCellDef="let element">{{ element.email }}</td>
      </ng-container>

      <!-- birthdate Column -->
      <ng-container matColumnDef="birthDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Birthdate</th>
        <td mat-cell *matCellDef="let element">{{ element.birthDate | date: 'mediumDate' }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell layout--padding-16" colspan="4">
          No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10]"
      showFirstLastButtons
      aria-label="Select user of users"
      (page)="onPageChange($event)"
    >
    </mat-paginator>
  </div>
  <button mat-fab class="add-user-btn" matTooltip="Add User" (click)="openDialog()">
    <mat-icon>add</mat-icon>
  </button>
</section>
